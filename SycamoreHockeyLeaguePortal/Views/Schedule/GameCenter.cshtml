@model SycamoreHockeyLeaguePortal.Models.Schedule
@inject SycamoreHockeyLeaguePortal.Data.ApplicationDbContext _context

@{
    ViewData["Title"] = Model.Period == 0 ?
        $"{Model.Date.ToShortDateString()} - {Model.AwayTeam.Code} @ {Model.HomeTeam.Code}" :
        $"{Model.Date.ToShortDateString()} - {Model.AwayTeam.Code} {Model.AwayScore} - {Model.HomeScore} {Model.HomeTeam.Code} ({Model.ShortStatus})";
}

<div class="container game">
    <div class="row">
        <div class="col-12" id="game-notes">
            @(Model.Notes != "" ? Model.Notes : Model.Date.ToLongDateString())
        </div>
    </div>
    <div class="row">
        <div class="col-3 away-team">
            <h5>@Html.DisplayFor(model => model.AwayTeam.City)</h5>
            <h1 class="team-name">@Html.DisplayFor(model => model.AwayTeam.Name)</h1>
        </div>
        <div class="col-2 team-logo">
            <img class="logo" src="~/@Model.AwayTeam.LogoPath" />
        </div>
        <div class="col score" id="away-score">
            @(Model.Status != "Not started" ? Html.DisplayFor(model => model.AwayScore) : "-")
        </div>
        <div class="col score" id="home-score">
            @(Model.Status != "Not started" ? Html.DisplayFor(model => model.HomeScore) : "-")
        </div>
        <div class="col-2 team-logo">
            <img class="logo" src="~/@Model.HomeTeam.LogoPath" />
        </div>
        <div class="col-3 home-team">
            <h5>@Html.DisplayFor(model => model.HomeTeam.City)</h5>
            <h1 class="team-name">@Html.DisplayFor(model => model.HomeTeam.Name)</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-12" id="game-status">
            <div class="status">@Html.DisplayFor(model => model.Status)</div>
        </div>
    </div>
    @if (!Model.IsFinalized)
    {
        <div class="row" style="margin-top: 30px;">
            <div class="col">
                @if (Model.Period == 0)
                {
                    <a class="btn btn-primary" 
                        asp-action="StartOrResumeGame" 
                        asp-route-date="@Model.Date.ToShortDateString()" 
                        asp-route-awayTeam="@Model.AwayTeam.Code" 
                        asp-route-homeTeam="@Model.HomeTeam.Code">Start Game</a>
                }
                else
                {
                    <a class="btn btn-primary" 
                        asp-action="StartOrResumeGame" 
                        asp-route-date="@Model.Date.ToShortDateString()" 
                        asp-route-awayTeam="@Model.AwayTeam.Code" 
                        asp-route-homeTeam="@Model.HomeTeam.Code">Resume Game</a>
                }
            </div>
        </div>
    }
    <div class="row" style="margin-top: 50px;">
        <div class="col">
            @if (Model.Type == "Regular Season")
            {
                <a asp-action="Index" asp-route-weekOf="@Model.Date.ToShortDateString()">Back to Schedule</a>
            }
            else
            {
                <a asp-action="Playoffs" asp-route-season="@Model.Date.Year" asp-route-round="@Model.PlayoffRound!.Index">Back to Playoffs</a>
            }
        </div>
    </div>
</div>